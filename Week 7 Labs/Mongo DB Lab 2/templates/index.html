{% extends "base.html" %}
{% block content %}
<h2>Collection: cities</h2>
<div class="card">
    <h3>Quick preview (first 10 rows)</h3>
    {{ preview_table|safe }}
</div>
<div class="card">
    <h3>All records (live)</h3>
    <table class="data">
        <thead><tr><th>ID</th><th>name</th><th>country</th><th>population</th><th>actions</th></tr></thead>
        <tbody>
        {% for row in records %}
        <tr>
            <td>{{ row['_id'] }}</td>
            <td>{{ row.get('name','') }}</td>
            <td>{{ row.get('country','') }}</td>
            <td>{{ row.get('population','') }}</td>
            <td>
                <a class="button" href="{{ url_for('edit_form', id=row['_id']) }}">Edit</a>
                <form class="inline" method="POST" action="{{ url_for('delete_record', id=row['_id']) }}" onsubmit="return confirm('Delete this record?');">
                    <input class="button" type="submit" value="Delete">
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
